<? include $this->header() ?>

<div class="row">
  <div class="col-md-12">
    <h1>Add New Network</h1>
    <form name="edit_sender" class="form-horizontal" method="post" action="<?=$this->url("/network/add")?>">
      <input type="hidden" name="process" value="1">

      <div class="form-body">
      
        <div class="form-group">
          <label class="col-md-3 control-label">Name</label>
          <div class="col-md-7"><input class="form-control" maxlength="255" name="name" /></div>
        </div>

        <div class="form-group">
          <label class="col-md-3 control-label">Network</label>
          <div class="col-md-7">
            <select class="form-control" name="def" id='def'>
              <option value="">-- NONE --</option>
              <? while ($network_def->fetch()){ ?>
              <option value="<?=$network_def->id?>" data-type="<?=$network_def->type?>"><?=$network_def->name?></option>
              <? } ?>
            </select>
          </div>
        </div>


        <div class="form-group" id='aff_id' style="display:none">
          <label class="col-md-3 control-label">Affiliate ID</label>
          <div class="col-md-7"><input class="form-control" maxlength="255" name="affiliate_id" /></div>
        </div>

        <div class="form-group" id="api_key" style="display:none">
          <label class="col-md-3 control-label">API Key</label>
          <div class="col-md-7"><input class="form-control" maxlength="255" name="api_key" /></div>
        </div>

        <div class="form-group">
          <div class="col-md-3"></div>
          <div class="col-md-7 text-right">
            <a href="<?=$this->url("/network/index")?>" class="btn btn-default">
              <span class="glyphicon glyphicon-remove"></span> Cancel
            </a>
            <button type="submit" class="btn btn-primary">
              <span class="glyphicon glyphicon-plus"></span> Add
            </button>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>

<script type="text/javascript">

  $("#def").change(function(){
    var option = $(this).find('option:selected');
    console.log($("option:selected",this).attr("data-type"));
    if($("option:selected",this).attr("data-type") == 'HASOFFERS'){
      $("#aff_id").hide();
      $("#api_key").show();

    } else if($("option:selected",this).attr("data-type") == 'CAKE'){
      $("#aff_id").show();
      $("#api_key").show();

    } else {
      $("#aff_id").hide();
      $("#api_key").hide();
    }
  });

</script>

<? include $this->footer() ?> 